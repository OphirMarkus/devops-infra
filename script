#!/bin/bash

# Make sure you are in your terraform directory configured for the remote backend

# Initialize Terraform (downloads remote state)
terraform init -input=false

# Get all resource addresses in state
resources=$(terraform state list)

if [ -z "$resources" ]; then
  echo "No resources found in terraform state."
  exit 0
fi

echo "Removing all resources from Terraform state..."

for res in $resources; do
  echo "Removing $res"
  terraform state rm "$res"
done

echo "All resources removed from terraform state."